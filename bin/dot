#!/usr/bin/env deno run -A
import Dfm from "../../dev/dfm/mod.ts";
import { CmdCheck, Symlink, Repository } from "../../dev/dfm/plugin/mod.ts";
import { fromFileUrl } from "https://deno.land/std@0.149.0/path/mod.ts"

const dfm = new Dfm({
  dotfilesDir: "~/dotfiles",
  dfmFilePath: fromFileUrl(import.meta.url)
});
const s = new Symlink(dfm);
const c = new CmdCheck();
const r = new Repository(dfm)

// 相対パスに対応する(resolveする)
s.link([
  ["zshrc", "~/.zshrc"],
  ["tmux.conf", "~/.tmux.conf"],
  ["vimrc", "~/.vimrc"],
  ["vim", "~/.vim"],
  ["config/alacritty", "~/.config/alacritty"],
]);

// コマンドの存在チェック
c.cmd([
  "vim",
  "nvim",
  "clang",
  "curl",
  "wget",
])

dfm.use(s, c, r);
dfm.end();
// vim:filetype=typescript
